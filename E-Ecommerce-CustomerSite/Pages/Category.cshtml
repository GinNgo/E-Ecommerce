@page "{id}"
@using E_Ecommerce_Shared.DTO
@model E_Ecommerce_CustomerSite.Pages.CategoryModel

@{

    string ApiUrl = "https://localhost:44324/wwwroot/Upload/";
    var breadBrum = ViewData["BreadBrum"] as List<CategoriesDto>;

}
<!-- breadcrumb  -->
<section class="breadcrumbbar">
    <div class="container-xl">
        <ol class="breadcrumb mb-0 p-0 bg-transparent">
            <li class="breadcrumb-item"><a asp-page="Index">Trang chủ</a></li>
            @for (var i = 0; i < breadBrum.Count() - 1; i++)
            {

                <li class="breadcrumb-item"><a asp-page="Category" asp-route-id="@breadBrum[i].CategoryId">@breadBrum[i].CategoryName</a></li>
            }
            <li class="breadcrumb-item active"><a asp-page="Category" asp-route-id="@breadBrum[breadBrum.Count()-1].CategoryId">@breadBrum[breadBrum.Count()-1].CategoryName</a></li>


        </ol>
    </div>
</section>
<section class="content my-4">
    <div class="container-xl d-flex ">
        <div class="filter" style="width:420px">filter</div>
        @if (@Model.productsDtos != null)
        {
            <div class="noidung bg-white position-relative" style=" width: 100%;">
                <!-- header của khối sản phẩm : tag(tác giả), bộ lọc và sắp xếp  -->

                <div class="header-khoi-sp d-flex">
                    <div class="sort d-flex ml-auto">
                        <div class="hien-thi d-flex">
                            <label for="hienthi-select" class="label-select">Hiển thị</label>
                            <div class="dropdown">
                                <button aria-expanded="false" aria-haspopup="true" class="btn btn-light dropdown-toggle" data-bs-toggle="dropdown" id="pagingDropDownMenuBtn" type="button">10</button>
                                <div aria-labelledby="pagingDropDownMenuBtn" class="dropdown-menu dropdown-menu-right">
                                    <a class="dropdown-item active" asp-page="category" asp-route-id="@breadBrum[breadBrum.Count()-1].CategoryId" asp-route-p=1&amp asp-route-s=10>10</a>
                                    <a class="dropdown-item active" asp-page="category" asp-route-id="@breadBrum[breadBrum.Count()-1].CategoryId" asp-route-p=1&amp asp-route-s=20>20</a>
                                    <a class="dropdown-item active" asp-page="category" asp-route-id="@breadBrum[breadBrum.Count()-1].CategoryId" asp-route-p=1&amp asp-route-s=30>30</a>
                                </div>
                            </div>
                        </div>
                        <div class="sap-xep">
                            <label for="sapxep-select" class="label-select">Sắp xếp</label>
                            <select class="sapxep-select">
                                <option value="moinhat">Mới nhất</option>
                                <option value="thap-cao">Giá: Thấp - Cao</option>
                                <option value="cao-thap">Giá: Cao - Thấp</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- các sản phẩm  -->
                <div class="items mt-5">
                    <div class="container-xl  row d-flex align-items-center m-0 p-0 ps-3 pe-2" style="padding-bottom: 2rem;">
                        <!-- 1 san pham -->
                        @foreach (var item in @Model.productsDtos)
                        {
                            <div class="card ">
                                <a asp-page="Detail" asp-route-id="@item.ProductId" class="motsanpham"
                           style="text-decoration: none; color: black;" data-toggle="tooltip" data-placement="bottom"
                           title="Lập Kế Hoạch Kinh Doanh Hiệu Quả">
                                    <img class="card-img-top anh" src="@ApiUrl@item.ImageUrl " style="height:173px"
                                 alt="lap-ke-hoach-kinh-doanh-hieu-qua">
                                    <div class="card-body noidungsp mt-3">
                                        <h3 class="card-title ten">@item.ProductName</h3>
                                        <small class="tacgia text-muted">Brian Finch</small>
                                        <div class="gia d-flex align-items-baseline">
                                            <div class="giamoi">@String.Format("{0:0,0}",@Math.Abs(@item.PriceDiscount)) ₫</div>
                                            <div class="giacu text-muted">@String.Format("{0:0,0}",@Math.Abs(@item.Price)) ₫</div>
                                            <div class="sale">-@String.Format("{0:0,0}",@Math.Abs((@item.Price - @item.PriceDiscount)*100/@item.Price))%</div>
                                        </div>
                                        <div class="danhgia">
                                            <ul class="d-flex" style="list-style: none;">
                                                <li class="active"><i class="fa fa-star"></i></li>
                                                <li class="active"><i class="fa fa-star"></i></li>
                                                <li class="active"><i class="fa fa-star"></i></li>
                                                <li class="active"><i class="fa fa-star"></i></li>
                                                <li><i class="fa fa-star"></i></li>
                                                <li><span class="text-muted">0 nhận xét</span></li>
                                            </ul>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        }
                        <!-- pagination bar -->
                        <div class="pagination-bar my-3">
                            <div class="row">
                                <div class="col-12">
                                    @* <nav>
                                <ul class="pagination justify-content-center">
                                <li class="page-item disabled">
                                <a class="page-link" href="#" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                                <span class="sr-only">Previous</span>
                                </a>
                                </li>
                                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                <li class="page-item"><a class="page-link" href="#">2</a></li>
                                <li class="page-item">
                                <a class="page-link" href="#" aria-label="Next">
                                <span aria-hidden="true">›</span>
                                <span class="sr-only">Next</span>
                                </a>
                                </li>
                                <li class="page-item">
                                <a class="page-link" href="#" aria-label="Next">
                                <span aria-hidden="true">»</span>
                                <span class="sr-only">Next</span>
                                </a>
                                </li>
                                </ul>
                                </nav>*@
                                    <paging class="paination" total-records="@Model.totalProducts" show-total-pages="false"
                                        show-total-records="false" page-size="@Model.pageSize" page-no="@Model.pageIndex"></paging>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>



                <!--het khoi san pham-->
            </div>
        }
        else
        {
            <p>Sản phẩm không còn</p>
        }

        <!--het div noidung-->
    </div>
    <!--het container-xl-->
</section>